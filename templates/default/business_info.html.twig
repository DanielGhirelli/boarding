{% extends 'register.html.twig' %}

{% block title %}OmniFund | {{ title }}{% endblock %}

{% block container  %}
    <div class="container">
        <div class="ibox">
            <div class="ibox-content">
                {{ form_start(form, {attr: {class: 'form-horizontal'} }) }}
                {% form_theme form 'input.error.html.twig' %}

                <div class="row" style="margin-bottom:12px;">
                    <div class="col-md-12">
                        <div class="col-xs-12">
                            <div style="float:right">
                                <div class="btn-group save-group">
                                    {{ form_widget(form.Save) }}
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12">
                            {{ include ('step_indicator.html.twig', {step: 1}) }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    {# Left Side #}
                    <div class="col-xs-6">
                        <div class="form-group" style="margin-bottom: 0">
                            <label class="col-xs-3 control-label">Contact Name: <label style="color: red">*</label></label>
                            <div class="col-xs-9">
                                <div class="row nopadding">
                                    <div class="col-xs-6">
                                        <div class="form-group {{ form.businessContactFirst.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessContactFirst) }}
                                            {{ form_errors(form.businessContactFirst) }}
                                        </div>
                                    </div>

                                    <div class="col-xs-6">
                                        <div class="form-group {{ form.businessContactLast.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessContactLast) }}
                                            {{ form_errors(form.businessContactLast) }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" style="margin-bottom: 0">
                            <label class="col-xs-3 control-label">Legal Business <br/> Name: <label style="color: red">*</label></label>
                            <span class="col-xs-8 {{ form.businessName.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessName) }}
                                {{ form_errors(form.businessName) }}
                            </span>
                            <span class="col-xs-1" style="padding: 5px 0; margin-left: -5px">
                                <a data-toggle="popover" style="text-decoration: none; padding: 2px 0px 0px 10px; cursor: pointer" title='Info <a href="#" class="close" data-dismiss="alert" style="margin-top: -3px" title="Close">&times;</a>' data-content='The legal name, along with abbreviations and punctuation MUST match the name on the state’s filing website (SOS).'>
                                    <i class="fa fa-info-circle fa-lg"></i>
                                </a>
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Legal Address: <label style="color: red">*</label></label>
                            <span class="col-xs-8 {{ form.businessAddress1.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessAddress1) }}
                                {{ form_errors(form.businessAddress1) }}
                            </span>
                            <span class="col-xs-1" style="padding: 5px 0; margin-left: -5px">
                                <a data-toggle="popover" style="text-decoration: none; padding: 2px 0px 0px 10px; cursor: pointer" title='Info <a href="#" class="close" data-dismiss="alert" style="margin-top: -3px" title="Close">&times;</a>' data-content='This MUST match the state filing and cannot be a PO Box.'>
                                    <i class="fa fa-info-circle fa-lg"></i>
                                </a>
                            </span>
                        </div>

                        <div class="form-group form-group-nopadding">
                            <label class="col-xs-3 control-label"></label>
                            <div class="col-xs-9">
                                <div class="row nopadding">
                                    <div class="col-xs-5">
                                        <div class="form-group {{ form.businessCity.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessCity) }}
                                            <p class="help-block">City</p>
                                        </div>
                                    </div>

                                    <div class="col-xs-3">
                                        <div class="form-group {{ form.businessState.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessState) }}
                                            <p class="help-block">State</p>
                                        </div>
                                    </div>

                                    <div class="col-xs-4">
                                        <div class="form-group {{ form.businessZip.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessZip) }}
                                            <p class="help-block">Zip</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Legal Phone: <label style="color: red">*</label></label>
                            <span class="col-xs-9 {{ form.businessPhone.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessPhone) }}
                                {{ form_errors(form.businessPhone) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Email: <label style="color: red">*</label></label>
                            <span class="col-xs-9 {{ form.businessEmail.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessEmail) }}
                                {{ form_errors(form.businessEmail) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Federal Tax ID: <label style="color: red">*</label></label>
                            <span class="col-xs-9 {{ form.businessTaxid.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessTaxid) }}
                                {{ form_errors(form.businessTaxid) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">How did you hear about us? <label style="color: red">*</label></label>
                            <span class="col-xs-9 {{ form.heardAbout.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.heardAbout) }}
                                {{ form_errors(form.heardAbout) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Does your application relate to one of the following software integrations?</label>
                            <span class="col-xs-5">
                                {{ form_widget(form.softwareIntegration) }}
                            </span>
                            <span class="col-xs-4" id="softwareIntegOther" style="display: none">
                                {{ form_widget(form.softwareIntegrationOther) }}
                            </span>
                        </div>
                    </div>


                    {# Right Side #}
                    <div class="col-xs-6">
                        <div class="form-group">
                            <label class="col-xs-3 control-label">&nbsp;</label>
                            <div class="col-xs-9 checkbox" style="padding-top: 0">
                                <label>{{ form_widget(form.useLegalAddress) }} Use Legal Information</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">DBA: <label style="color: red">*</label></label>
                            <span class="col-xs-9 {{ form.businessDba.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessDba) }}
                                {{ form_errors(form.businessDba) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">DBA Address: <label style="color: red">*</label></label>
                            <span class="col-xs-8 {{ form.businessDbaAddress1.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessDbaAddress1) }}
                                {{ form_errors(form.businessDbaAddress1) }}
                            </span>
                            <span class="col-xs-1" style="padding: 5px 0; margin-left: -5px">
                                <a data-toggle="popover" style="text-decoration: none; padding: 2px 0px 0px 10px; cursor: pointer" title='Info <a href="#" class="close" data-dismiss="alert" style="margin-top: -3px" title="Close">&times;</a>' data-content='The physical location where business is conducted.'>
                                    <i class="fa fa-info-circle fa-lg"></i>
                                </a>
                            </span>
                        </div>

                        <div class="form-group form-group-nopadding">
                            <label class="col-xs-3 control-label"></label>
                            <div class="col-xs-9">
                                <div class="row nopadding">
                                    <div class="col-xs-5">
                                        <div class="form-group {{ form.businessDbaCity.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessDbaCity) }}
                                            <p class="help-block">City</p>
                                        </div>
                                    </div>

                                    <div class="col-xs-3">
                                        <div class="form-group {{ form.businessDbaState.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessDbaState) }}
                                            <p class="help-block">State</p>
                                        </div>
                                    </div>

                                    <div class="col-xs-4">
                                        <div class="form-group {{ form.businessDbaZip.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                            {{ form_widget(form.businessDbaZip) }}
                                            <p class="help-block">Zip</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">DBA Phone:</label>
                            <span class="col-xs-9 {{ form.businessDbaPhone.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessDbaPhone) }}
                                {{ form_errors(form.businessDbaPhone) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Fax #:</label>
                            <span class="col-xs-9 {{ form.businessFax.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessFax) }}
                                {{ form_errors(form.businessFax) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Website Address:</label>
                            <span class="col-xs-9 {{ form.businessWebsite.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessWebsite) }}
                                {{ form_errors(form.businessWebsite) }}
                            </span>
                        </div>

                        <div class="form-group">
                            <label class="col-xs-3 control-label">Number of Locations: <label style="color: red">*</label></label>
                            <span class="col-xs-3 {{ form.businessNumLocations.vars.errors|length > 0 ? 'has-error has-danger' }}">
                                {{ form_widget(form.businessNumLocations) }}
                                {{ form_errors(form.businessNumLocations) }}
                            </span>
                        </div>
                    </div>

                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function(){
            // Copy inputs from Business Address
            $("#register_business_info_form_useLegalAddress").on('click', function () {
                $("#register_business_info_form_businessDba").val("");
                $("#register_business_info_form_businessDbaAddress1").val("");
                $("#register_business_info_form_businessDbaCity").val("");
                $("#register_business_info_form_businessDbaState").val("");
                $("#register_business_info_form_businessDbaZip").val("");
                $("#register_business_info_form_businessDbaPhone").val("");

                if ($(this).is(':checked')){
                    $("#register_business_info_form_businessDba").val($("#register_business_info_form_businessName").val());
                    $("#register_business_info_form_businessDbaAddress1").val($("#register_business_info_form_businessAddress1").val());
                    $("#register_business_info_form_businessDbaCity").val($("#register_business_info_form_businessCity").val());
                    $("#register_business_info_form_businessDbaState").val($("#register_business_info_form_businessState").val());
                    $("#register_business_info_form_businessDbaZip").val($("#register_business_info_form_businessZip").val());
                    $("#register_business_info_form_businessDbaPhone").val($("#register_business_info_form_businessPhone").val());
                }
            });

            // > Show input for "Other"
            $("#register_business_info_form_softwareIntegration").on('change', function (event) {
                $("#softwareIntegOther").hide();
                if("Other" == this.value)
                {
                    $("#softwareIntegOther").show();
                }
            });

            if("Other" == $("#register_business_info_form_softwareIntegration").val()){
                $("#softwareIntegOther").show();
            }
            // < Show input for "Other"

            buttonBlur('register_business_info_form', '...Saving...');
        });
    </script>
{% endblock %}